# Chapter4 : 부자연스러움을 해결하는 도메인 서비스 

## 4.1 서비스란 *P62*
- 소프트웨어 개발에서 말하는 서비스는 클라이언트를 위해 무언가를 해주는 객체를 말한다
- 도메인 주도 설계에서 ㅁ라하는 서비스는 크게 두 가지가 있다
  - 도메인을 위한 서비스
  - 애플리케이션을 위한 서비스 

## 4.2 도메인 서비스란? 
- 시스템에는 값 객체나 엔티티로 구현하기 어색한 행동도 있다. 도메인 서비스는 이런 어색함을 해결해 주는 객체다.
- 도메인 서비스는 자신의 행동을 바꿀 수 있는 인스턴스만의 값을 갖지 않는다는 점에서 값 객체나 엔티티와 다르다. (**도메인 서비스는 자체적인 상태 관리를 하지 않는다**) *P65*

## 4.3 도메인 서비스를 남용한 결과 *P66*
- 엔티티나 값 객체에 정의하기 부자연스러운 처리는 도메인 서비스에 정의하면 된다.
- 중요한것은 **부자연스러운 처리**에만 한정 해야 한다는 점이다.
- 도메인 객체가 원래 포함해야할 지식이나 처리 내용을 도메인 서비스나 애플리케이션 서비스에 빼앗겨 자신이 제공 할 수 있는 정보가 많지 많은 도메인을 *빈약한 도메인 (Anemic Domain Model)* 이라고 한다.

### 4.3.1 도메인 서비스는 가능한 한 피할것
- 어떤 행위를 값 객체나 엔티티에 구현할지 아니면 도메인 서비스에 구현할지 망설여진다면 우선 엔티티나 값 객체에 정의하는것이 좋다.
- 도메인 서비스를 남용하면 데이터와 행위가 단절돼 로직이 흩어지기 쉽다.
- 로직이 흩어지면 소프트웨어가 변화에 대응하는 유연성이 저해돼 심각하게 정체된다.

### 도메인 서비스의 기준 *P73*
> 데이터스토어는 본래 도메인에는 없는 존재로 애플리케이션 구축을 위해 추가된 애플리케이션만의 관심사다. 그러므로 도메인 개념이나 지식을 코드로 옮긴 대상인 도메인 객체가 데이터스토어를 직접 다루는 것은 바람직 하지 못하다. 

> 개인적으로(필자) 어떤 처리를 도메인 서비스로 만들어야 할지를 판단할때 그 처리가 도메인에 기초한 것인지 중요하게 본다. '사용자명 중복' 이라는 개념이 도메인에 기초한 것이라면 이를 구현하는 서비스도 도메인 서비스여야한다. 반대로, 애플리케이션을 만들며 필요하게 된 것이라면 도메인 서비스가 아니다. 그런 처리는 애플리케이션 서비스로 정의해야 한다. 


### 도메인 서비스 네이밍 rule *P77*
- 구체적으로 XxxDomain.Services.XxxService 네임스페이스를 부여해 XxxService가 도메인 서비스임을 보여 줄수 있다.
- ex) java : company.order.services.Orderservice

## Summary
- 도메인에는 도메인 객체에 구현하기에 자연스럽지 못한 행위가 있다.
- 이런 행위는 여러 개의 도메인 객체를 가로질러 이뤄지는 처리인 경우가 많다. 도메인 서비스를 이럴때 활용 
- 빈약한 도메인 모델이 생기지 않으려면 어떤 행위를 어디에 구현해야 할지 세심하게 신경써야함
- 행위가 빈약한 객체는 절차적 프로그래밍으로 빠지기 쉬움.





  













